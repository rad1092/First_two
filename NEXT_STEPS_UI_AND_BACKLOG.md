# BitNet Analyzer 다음 단계 작업 정리

이 문서는 다음 턴부터 바로 실행할 수 있도록
1) 인터페이스 고도화 진행 단계,
2) 전체 남은 과제(개선권장/코드 최적화/입력 포맷 확장)
를 한 번에 정리한 체크리스트입니다.

---

## A. 인터페이스 고도화 진행 단계 (다음 턴부터 착수)

### Phase 1 — 인터페이스 단순화(우선)
목표: "처음 들어온 사용자도 바로 분석" 가능한 화면으로 정리

- [ ] 화면을 2모드로 분리
  - [ ] 빠른 시작 모드: 파일 입력 + 자연어 요청 + 실행 버튼 1개
  - [ ] 고급 모드: 그룹/타깃, JSON 대시보드, 모델 태그 등
- [ ] 섹션 구조 재배치
  - [ ] 입력
  - [ ] 실행 상태
  - [ ] 결과
- [ ] 초기에 보이는 요소 축소
  - [ ] 멀티 분석/JSON 대시보드는 접기(Accordion) 기본

완료 기준:
- 신규 사용자가 30초 내 첫 분석 실행 가능
- 단일 분석 중심 플로우에서 클릭 수 감소

### Phase 2 — 자연어 요청 인터페이스
목표: 사용자의 작업 지시를 자연어로 받아 흐름 자동 선택

- [ ] "작업 요청" 입력창 추가 (예: "이 파일 먼저 분석하고 시각화 옵션 알려줘")
- [ ] 의도 라우팅 규칙 추가
  - [ ] 분석 우선
  - [ ] 시각화 옵션 안내 우선
  - [ ] 멀티 비교 우선
- [ ] 질문(question)과 작업요청(intent) 분리 저장

완료 기준:
- 자연어 요청 한 번으로 기본 작업 흐름 자동 진행
- 요청 해석 실패 시 추천 액션 버튼 제공

### Phase 3 — 상태/피드백 표준화
목표: 진행상황/실패 원인/다음 행동을 명확히 안내

- [ ] 로딩 상태 통합 컴포넌트
  - [ ] 분석 중
  - [ ] BitNet 실행 중
  - [ ] 멀티 분석 중
  - [ ] 차트 생성 중
- [ ] 에러 메시지 표준화
  - [ ] 사용자용 간단 메시지
  - [ ] 상세 기술 메시지(접기)
- [ ] 버튼 활성/비활성 규칙 정리

완료 기준:
- 실패 시 사용자가 다음 액션을 바로 알 수 있음
- 중복 클릭/중복 요청 최소화

### Phase 4 — 대시보드 사용성 강화
목표: 결과 확인 시간을 줄이고 탐색 효율 개선

- [ ] KPI 카드 + 인사이트 리스트 개선
- [ ] 필터 추가
  - [ ] 파일 단위
  - [ ] 컬럼명 검색
  - [ ] 인사이트 유형(결측/이상치/드리프트)
- [ ] 드릴다운 패널 추가
  - [ ] 선택 인사이트 근거 데이터 표기

완료 기준:
- 핵심 인사이트 3개 확인 시간 단축
- 사용자가 근거를 UI에서 즉시 확인 가능

### Phase 5 — 비동기 차트 UX 연동
목표: 대형 데이터에서도 차트 생성 경험 안정화

- [ ] 차트 job 상태 표시(queued/running/done/failed)
- [ ] polling + 완료 시 결과 자동 갱신
- [ ] 실패 재시도 버튼

완료 기준:
- 차트 생성 대기 중에도 UI 사용 가능
- 실패 복구 동선 제공

---

## B. 남은 과제 백로그 (우선순위 포함)

## B-1. 분석 정확도 개선

### P1. 날짜 파싱 포맷 확장
- [ ] 날짜 포맷 후보 확장 (`YYYYMMDD`, `DD-MM-YYYY`, locale 변형)
- [ ] 모호한 포맷은 불확실 상태로 분리

### P1. 결과 스키마 버전 필드 도입
- [ ] JSON 결과에 `schema_version` 추가
- [ ] 버전 변경 로그 문서화

### P2. 고유값 추정 정밀 옵션
- [ ] 기본(빠른 추정) + 정밀 모드(옵션) 이원화
- [ ] 결과에 추정 방식 메타데이터 포함

## B-2. 코드 최적화/구조화

### P1. UI 스크립트 모듈화
- [ ] `app.js`를 기능 단위로 분리
  - [ ] 상태관리
  - [ ] API 호출
  - [ ] 렌더링
  - [ ] 이벤트 바인딩

### P1. API/에러 핸들링 공통화
- [ ] 공통 fetch wrapper
- [ ] 에러 포맷 표준(JSON)

### P2. 성능 개선
- [ ] 대형 JSON 렌더 incremental 처리
- [ ] 불필요한 재렌더 최소화

## B-3. 입력 파일 확장성 (후순위)

현재 직접 지원은 CSV 중심이므로, 아래를 순차 확장:

### P2. Excel 지원 (`.xlsx`, `.xls`)
- [ ] 시트 선택 UI
- [ ] 표 데이터 CSV 정규화

### P3. 문서 포맷 지원 (`.pdf`, `.docx`, `.pptx`)
- [ ] 표 추출 파이프라인 도입
- [ ] 추출 정확도/신뢰도 표시
- [ ] 실패 시 CSV 업로드 fallback 제공

---

## C. 다음 턴 실행 순서 (권장)

1. Phase 1 (단순화) 착수
2. Phase 2 (자연어 요청 인터페이스)
3. Phase 3 (상태/에러 표준화)
4. Phase 4 (대시보드 필터/드릴다운)
5. Phase 5 (차트 비동기 UX)

병행 과제로 `schema_version` 설계를 함께 진행.

---

## D. 체크 포인트

- [ ] 기능 개발 후 `pytest -q` 통과
- [ ] UI 주요 흐름 스모크 테스트
- [ ] 문서 업데이트(README/변경 이력)
